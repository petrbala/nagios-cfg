###############################################################################
###############################################################################
#
# HOST DEFINITION
#
###############################################################################
###############################################################################
define host {
	use                             linux-server
	host_name                       N28-MC1
	alias                           Namatix28 (MC1) Linux
	address                         185.203.84.193
}
define host {
	use                             linux-server
	host_name                       N29-MC2
	alias                           Namatix29 (MC2) Linux
	address                         185.203.84.194
}
define host {
	use                             linux-server
	host_name                       N31-MC3
	alias                           Namatix31 (MC3) Linux
	address                         185.203.84.195
}
define host {
	use                             linux-server
	host_name                       N38-KUBE-DEV
	alias                           Namatix38 KUBE DEV Linux
	address                         185.203.84.196
}
define host {
	use                             linux-server
	host_name                       N48-STORAGE
	alias                           Navmatix48 EU Rinex Storage
	address				88.86.116.7 
}
define host {
	use                             linux-server
	host_name                       N-USA-STORAGE
	alias                           Navmatix USA Rinex Storage
	address				185.93.0.40 
}
define host {
	use                             linux-server
	host_name                       N-USA-DB1
	alias                           Namatix USA DB1 Linux
	address                         185.93.0.33
}
define host {
	use                             linux-server
	host_name                       N-USA-DB2
	alias                           Namatix USA DB2 Linux
	address                         185.93.0.36
}
define host {
	use                             linux-server
	host_name                       N21-DB1
	alias                           Namatix21 DB1 Linux
	address                         46.234.104.155
}
define host {
	use                             linux-server
	host_name                       N11-DB2
	alias                           Namatix11 DB2 Linux
	address                         46.234.120.97
}
define host {
	use                             linux-server
	host_name                       RUS-DB1
	alias                           RUS DB1 Linux
	address				82.202.176.57 
}
define host {
	use                             linux-server
	host_name                       RUS-DB2
	alias                           RUS DB2 Linux
	address				82.202.176.50 
}
define host {
	use				linux-server
	host_name			N71-KUBE
	alias				Navmatix71 KUBE master 1
	address				185.203.84.200
}
define host {
	use				linux-server
	host_name			N72-KUBE
	alias				Navmatix72 KUBE master 2
	address				185.203.84.201
}
define host {
        use                             linux-server
        host_name                       N73-KUBE
        alias                           Navmatix73 KUBE master 3
        address                         185.203.84.202
}
define host {
        use                             linux-server
        host_name                       N74-RabbitMQ
        alias                           Navmatix74 RabbitMQ 1
        address                         185.203.84.203
}
define host {
        use                             linux-server
        host_name                       N75-RabbitMQ
        alias                           Navmatix75 RabbitMQ 2
        address                         185.203.84.204
}
define host {
        use                             linux-server
        host_name                       N76-RabbitMQ
        alias                           Navmatix76 RabbitMQ 3
        address                         185.203.84.205
}
define host {
        use                             linux-server
        host_name                       N77-KUBE
        alias                           Navmatix77 KUBE worker 1 
        address                         185.203.84.206
}
define host {
        use                             linux-server
        host_name                       N78-KUBE
        alias                           Navmatix78 KUBE worker 2
        address                         185.203.84.207
}
define host {
        use                             linux-server
        host_name                       N79-KUBE
        alias                           Navmatix79 KUBE worker 3
        address                         185.203.84.208
}
define host {
        use                             linux-server
        host_name                       N80-KUBE
        alias                           Navmatix80 KUBE worker 4
        address                         185.203.84.209
}
define host {
        use                             linux-server
        host_name                       N81-KUBE
        alias                           Navmatix81 KUBE worker 5
        address                         185.203.84.210
}
define host {
        use                             linux-server
        host_name                       N82-Ceph
        alias                           Navmatix82 Ceph 1
        address                         185.203.84.211
}
define host {
        use                             linux-server
        host_name                       N83-Ceph
        alias                           Navmatix83 Ceph 2
        address                         185.203.84.212
}
define host {
        use                             linux-server
        host_name                       N84-Ceph
        alias                           Navmatix84 Ceph 3
        address                         185.203.84.213
}
define host {
        use                             linux-server
        host_name                       N85-Scylla
        alias                           Navmatix85 Scylla 1
        address                         185.203.84.214
}
define host {
        use                             linux-server
        host_name                       N86-Scylla
        alias                           Navmatix86 Scylla 2
        address                         185.203.84.215
}
define host {
        use                             linux-server
        host_name                       N87-Scylla
        alias                           Navmatix87 Scylla 3
        address                         185.203.84.216
}
define host {
        use                             linux-server
        host_name                       N88-DB
        alias                           Navmatix88 PostgreSQL 1
        address                         185.203.84.217
}
define host {
        use                             linux-server
        host_name                       N89-DB
        alias                           Navmatix89 PostgreSQL 2 + MariaDB
        address                         185.203.84.218
}
define host {
	use				linux-server
	host_name			N62-SPIRENT
	alias				Navmatix62 GNSS Forecast KUBE master
	address				185.203.84.1
}

define host {
	use				linux-server
	host_name			N63-SPIRENT
	alias				Navmatix63 GNSS Forecast KUBE worker
	address				185.203.84.2
}

define host {
	use				linux-server
	host_name			N64-SPIRENT
	alias				Navmatix64 GNSS Forecast PostgreSQL1
	address				185.203.84.3
}

define host {
	use				linux-server
	host_name			N65-SPIRENT
	alias				Navmatix65 GNSS Forecast PostgreSQL2
	address				185.203.84.4
}
###############################################################################
###############################################################################
#
# HOST GROUP DEFINITION
#
###############################################################################
###############################################################################
# Define an optional hostgroup for Linux machines
define hostgroup{
        hostgroup_name  ubuntu ; The name of the hostgroup
        alias           Linux Ubuntu Servers ; Long name of the group
        members         N28-MC1,N29-MC2,N31-MC3,N38-KUBE-DEV,N48-STORAGE,N-USA-STORAGE,N-USA-DB1,N-USA-DB2,N21-DB1,N11-DB2,RUS-DB1,RUS-DB2,N71-KUBE,N72-KUBE,N73-KUBE,N74-RabbitMQ,N75-RabbitMQ,N76-RabbitMQ,N77-KUBE,N78-KUBE,N79-KUBE,N80-KUBE,N81-KUBE,N82-Ceph,N83-Ceph,N84-Ceph,N85-Scylla,N86-Scylla,N87-Scylla,N88-DB,N89-DB,N62-SPIRENT,N63-SPIRENT,N64-SPIRENT,N65-SPIRENT ; Comma separated list of hosts that belong to this group
        }
define hostgroup{
	hostgroup_name	disk	;disk_hda2 and disk_hda3 applied for these servers
	alias		Linux Ubuntu Server with two additional disk checks
	members		N28-MC1,N29-MC2,N31-MC3,N38-KUBE-DEV,N48-STORAGE,N-USA-STORAGE,N-USA-DB1,N-USA-DB2,N21-DB1,N11-DB2,RUS-DB1,RUS-DB2
}
define hostgroup{
        hostgroup_name  MC
        alias           MultiConnector Linux Ubuntu Servers
        members         N28-MC1,N29-MC2
        }
define hostgroup{
        hostgroup_name  DB
        alias           DataBase Linux Ubuntu Servers
        members         N11-DB2,N21-DB1,N-USA-DB1,N-USA-DB2,RUS-DB1,RUS-DB2
        }
define hostgroup{
        hostgroup_name	RAID 
        alias           RAID Linux Ubuntu Servers
        members         N38-KUBE-DEV,N48-STORAGE,N-USA-STORAGE,N28-MC1,N29-MC2,N31-MC3,N11-DB2,N21-DB1,N-USA-DB1,N-USA-DB2,N71-KUBE,N72-KUBE,N73-KUBE,N74-RabbitMQ,N75-RabbitMQ,N76-RabbitMQ,N77-KUBE,N78-KUBE,N79-KUBE,N80-KUBE,N81-KUBE,N82-Ceph,N83-Ceph,N84-Ceph,N85-Scylla,N86-Scylla,N87-Scylla,N88-DB,N89-DB
        }

###############################################################################
###############################################################################
#
# SERVICE GROUP DEFINITIONS
#
###############################################################################
###############################################################################

define servicegroup{
        servicegroup_name       Spirent-GFC
        alias                   Spirent GNSS Foresight Services
}

###############################################################################
###############################################################################
#
# SERVICE DEFINITIONS
#
###############################################################################
###############################################################################

# START  common linux server definition
define service {
	hostgroup_name			ubuntu
	service_description             System load
	check_command                   check_nrpe!check_load
	check_interval                  1
	use                             generic-service
	contacts                        miroslav.dolecek, lukas.kral
}
define service {
	hostgroup_name			ubuntu
	service_description 		CPU Idle
	check_command			check_nrpe!check_cpu
	check_interval			1
	use				generic-service
	contacts                        miroslav.dolecek, lukas.kral
}
define service {
	hostgroup_name			RAID	
	service_description             RAID
	check_command                   check_nrpe!check_raid
	check_interval                  180
	use                             generic-service
}
define service {
	hostgroup_name			ubuntu
	service_description             Disk1
	check_command                   check_nrpe!check_hda1
	check_interval                  60
	use                             generic-service
}
define service {
	hostgroup_name			disk
	service_description             Disk2
	check_command                   check_nrpe!check_hda2
	check_interval                  60
	use                             generic-service
}
define service {
	hostgroup_name			disk
	service_description             Disk3
	check_command                   check_nrpe!check_hda3
	check_interval                  60
	use                             generic-service
}
define service {
	hostgroup_name			ubuntu
	service_description		Procs Zombie
	check_command                   check_nrpe!check_zombie_procs
	check_interval                  10
	use                             generic-service
}
define service {
	hostgroup_name			ubuntu
	service_description             Procs Total
	check_command                   check_nrpe!check_total_procs
	check_interval                  10
	use                             generic-service
}
define service {
        hostgroup_name			ubuntu
        service_description             Users Count
        check_command                   check_nrpe!check_users
        check_interval                  10
        use                             generic-service
}
define service{
	hostgroup_name			ubuntu
	service_description		Memory usage
	check_command			check_nrpe!check_mem
        check_interval                  1
	use				generic-service
}
# END common linux server definition
# START  hostgroup specific service definition
define service {
	hostgroup_name			MC
	service_description             Disk1_60s
	check_command                   check_nrpe!check_hda1
	check_interval                  1
	use                             generic-service
}
define service {
	hostgroup_name			MC
	service_description             Disk2_60s
	check_command                   check_nrpe!check_hda2
	check_interval                  1
	use                             generic-service
}
define service {
	hostgroup_name			MC
	service_description             Disk3_60s
	check_command                   check_nrpe!check_hda3
	check_interval                  1
	use                             generic-service
}
# PBA / obsolete MC services to remove in the future
;define service {
;	hostgroup_name			MC
;	service_description             Procs MultiConnector
;	check_command                   check_nrpe!check_procs_mc
;	check_interval                  2
;	use                             generic-service
;}
;define service {
;	hostgroup_name			MC
;	service_description             Procs MultiConnector DataProvider 
;	check_command                   check_nrpe!check_procs_mcdp
;	check_interval                  2
;	use                             generic-service
;}
define service{
	hostgroup_name			MC
	service_description		NTRIP
	check_command			check_ntrip
        check_interval                  1
	use				generic-service
	contacts			jiri.hanslian ;in addition to default contact group
}
;define service{
;	hostgroup_name			MC
;	service_description		nats	
;	check_command			check_nrpe!nats_active_subjects_raw -t 60
;        check_interval                  1
;	use				generic-service
;}
;define service{
;	hostgroup_name			MC
;	service_description		Redis Cluster Info
;	check_command			check_nrpe!check_redis_cluster_info
;        check_interval                  1
;	use				generic-service
;}
;define service{
;	hostgroup_name			MC
;	service_description		Redis Cluster Nodes
;	check_command			check_nrpe!check_redis_cluster_nodes
;       check_interval                  5
;	use				generic-service
;}
define service {
        hostgroup_name			DB
        service_description             Procs Postres SQL DB
        check_command                   check_nrpe!check_procs_pg
        check_interval                  1
        use                             generic-service
}
# END hostgroup specific service definition
# START host specific service definiton
define service {
	host_name			N-USA-STORAGE
	service_description             OpenVPN
	check_command                   check_nrpe!check_procs_ovpn
	check_interval                  5
	use                             generic-service
}
define service {
	host_name			N-USA-DB1
	service_description             Disk4
	check_command                   check_nrpe!check_hda4
	check_interval                  60
	use                             generic-service
}
define service {
	host_name			N-USA-DB1
	service_description             Disk5
	check_command                   check_nrpe!check_hda5
	check_interval                  60
	use                             generic-service
}
define service {
	host_name			N-USA-DB1,RUS-DB1
        service_description		DB connectios             
        check_command                   check_nrpe!check_postgres_conn
        check_interval                  5
        use                             generic-service
}
define service {
	host_name			N11-DB2,N-USA-DB1,RUS-DB1
        service_description		DB replication             
        check_command                   check_nrpe!check_postgres_replication
        check_interval			60                  
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             http://navmatix.com
        check_command                   check_http!-H navmatix.com!-u /contact/!-s "Navmatix"!-f follow 
        check_interval                  5
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             http://gnssmissionplanning.com
        check_command                   check_http!-H gnssmissionplanning.com!-s GNSS!-f follow 
        check_interval                  5
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             http://jnnabytek.cz
        check_command                   check_http!-H jnnabytek.cz!-u /kontakty.html!-s "JN"!-f follow 
        check_interval                  5
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             http://www.svatabozak.com/
        check_command                   check_http!-H svatabozak.com!-s svatabozak!-f follow 
        check_interval                  5
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             http://it-dent.cz
        check_command                   check_http!-H it-dent.cz!-s "Kontakt"!-f follow 
        check_interval                  5
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             https://sandbox-forecast-web.navmatix.com/
        check_command                   check_http!-H sandbox-forecast-web.navmatix.com!-s "Sign in"!-f follow 
        check_interval                  5
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             FTP-EU
        check_command                   check_nrpe!check_ftp_EU 
        check_interval                  720
        use                             generic-service
}
define service {
	host_name			N38-KUBE-DEV
        service_description             FTP-US
        check_command                   check_nrpe!check_ftp_US 
        check_interval                  720
        use                             generic-service
}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP Glopos NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_glopos -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP AG NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_ag -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP AG2 NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_ag2 -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP PL NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_pl -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP PL2 NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_pl2 -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP UK NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_uk -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP UK2 NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_uk2 -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP DK NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_dk -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP DK2 NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_dk2 -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP GR NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_gr -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP GR2 NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_gr2 -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP IE NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_ie -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP 2IE2 NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_2ie2 -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP NO SOUTH NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_no_south -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP NO NORTH NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_no_north -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP NO2 SOUTH NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_no2_south -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP NO2 NORTH NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_no2_north -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP N27DEV NET_RTCM3
#        check_command                   check_nrpe!check_ntrip_n27dev -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
##define service {
##	host_name			N38-KUBE-DEV
##        service_description             NTRIP IT NET_RTCM3
##        check_command                   check_nrpe!check_ntrip_it -t 60
##        check_interval                  1
##        use                             generic-service
##	max_check_attempts		4
##	event_handler			restart_tn
##}
##define service {
##	host_name			N38-KUBE-DEV
##        service_description             NTRIP IT2 NET_RTCM3
##        check_command                   check_nrpe!check_ntrip_it2 -t 60
##        check_interval                  1
##        use                             generic-service
##	max_check_attempts		4
##	event_handler			restart_tn
##}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP RUS1P NET
#        check_command                   check_nrpe!check_ntrip_rus1p -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP RUS1B NET
#        check_command                   check_nrpe!check_ntrip_rus1b -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP RUS2P NET
#        check_command                   check_nrpe!check_ntrip_rus2p -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP RUS2B NET
#        check_command                   check_nrpe!check_ntrip_rus2b -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#        service_description             NTRIP DE GER_33_AG_RTK_NET 
#        check_command                   check_nrpe!check_ntrip_de -t 60
#        check_interval                  1
#        use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#	service_description             NTRIP DE2 GER_33_AG_RTK_NET 
#	check_command                   check_nrpe!check_ntrip_de2 -t 60
#	check_interval                  1
#	use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
#define service {
#	host_name			N38-KUBE-DEV
#	service_description             NTRIP 2IE NET_RTCM3
#	check_command                   check_nrpe!check_ntrip_2ie -t 60
#	check_interval                  1
#	use                             generic-service
#	max_check_attempts		4
#	event_handler			restart_tn
#}
define service {
	host_name			N38-KUBE-DEV
	service_description             NTRIP CLOUDBASE RTK_RTCM3
	check_command                   check_nrpe!check_ntrip_cloudbase_cast -t 60
	check_interval                  5
	use                             generic-service
	max_check_attempts		3	
	contacts			miroslav.dolecek ;in addition to default contact group
}
#define service {
#	host_name			N28-MC1
#       service_description		glusterFS 
#       check_command                   check_nrpe!check_glusterfs_mnt
#       check_interval                  1
#       use                             generic-service
#	max_check_attempts		2
#}
#N64 Dedicated check on Spirent GFC DB, checks count of expired tiles/cuboids in spatial metadatase.
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-CDN-expired-tiles
        check_command                   check_nrpe!check_gfc_db_expired_cuboids
        check_interval                  240
        retry_interval                  5
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}
#N64 Check connection to DB
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-DB-isalive
        check_command                   check_nrpe!check_pg_conn
        check_interval                  10
        retry_interval                  1
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}
#N64 Check count of active connections to DB, compare with maximum set in postgres.conf ()
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-DB-active-connections-count
        check_command                   check_nrpe!check_pg_backends
        check_interval                  10
        retry_interval                  1
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}
#N64 Check DB size in less than expected size.
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-DB-size
        check_command                   check_nrpe!check_pg_dbsize
        check_interval                  240
        retry_interval                  5
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}
#N64 Check relication lag (on master DB)
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-DB-replication-lag
        check_command                   check_nrpe!check_pg_replication
        check_interval                  60
        retry_interval                  1
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}
#N64 Check postgres log if there is a FATAL error in the last hour
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-DB-log-contains-FATAL
        check_command                   check_nrpe!check_pg_log
        check_interval                  60
        retry_interval                  1
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}
#N64 Check on local machine that has the MASTER role
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-DB-MASTER-is-MASTER
        check_command                   check_nrpe!check_pg_master
        check_interval                  60
        retry_interval                  1
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}
#N64 Check on SLAVE DB that has the SLAVE role
define service {
        host_name                       N64-SPIRENT
        service_description             GFC-DB-SLAVE-is-SLAVE
        check_command                   check_nrpe!check_pg_slave
        check_interval                  60
        retry_interval                  1
        contact_groups                  sla-spirent
        servicegroups                   Spirent-GFC
        use                             generic-service
}

## ***N11-DB2,N21-DB1 IQP PRA***
#N11 Check connection to DB
define service {
        host_name                       N11-DB2,N21-DB1
        service_description             IQP-DB-isalive
        check_command                   check_nrpe!check_pg_conn
        check_interval                  1
        retry_interval                  1
        use                             generic-service
}
#N11 Check count of active connections to DB, compare with maximum set in postgres.conf ()
define service {
        host_name                       N11-DB2,N21-DB1
        service_description             IQP-DB-active-connections-count
        check_command                   check_nrpe!check_pg_backends
        check_interval                  5
        retry_interval                  1
        use                             generic-service
}
#N11 Check DB size in less than expected size.
define service {
        host_name                       N11-DB2,N21-DB1
        service_description             IQP-DB-size
        check_command                   check_nrpe!check_pg_dbsize
        check_interval                  240
        retry_interval                  5
        use                             generic-service
}
#N11 Check relication lag (on master DB)
define service {
        host_name                       N11-DB2
        service_description             IQP-DB-replication-lag
        check_command                   check_nrpe!check_pg_replication
        check_interval                  10
        retry_interval                  1
        use                             generic-service
}
#N11 Check postgres log if there is a FATAL error in the last hour
define service {
        host_name                       N11-DB2,N21-DB1
        service_description             IQP-DB-log-contains-FATAL
        check_command                   check_nrpe!check_pg_log
        check_interval                  10
        retry_interval                  1
        use                             generic-service
}
#N11 Check on local machine that has the MASTER role
define service {
        host_name                       N11-DB2,N21-DB1
        service_description             IQP-DB-MASTER-is-MASTER
        check_command                   check_nrpe!check_pg_master
        check_interval                  120
        retry_interval                  1
        use                             generic-service
}
#N11 Check on SLAVE DB that has the SLAVE role
define service {
        host_name                       N11-DB2
        service_description             IQP-DB-SLAVE-is-SLAVE
        check_command                   check_nrpe!check_pg_slave
        check_interval                  240
        retry_interval                  1
        use                             generic-service
}
# END host specific service definiton
